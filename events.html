<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>الفعاليات - دليل فعاليات المدينة</title>
      <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- local css -->
    <link rel="stylesheet" href="assets/css/styles.css" />
    <!--Font Awesome-->

    <script
      src="https://kit.fontawesome.com/1b6501c143.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="bg-light">
    <header>
      <main-navbar></main-navbar>
    </header>

    <main class="container my-4">
      <section class="mb-4">
        <h2 class="h4 mb-3">كل الفعاليات</h2>
<div class="d-flex align-items-center gap-2 mb-3">
  <select
    id="categoryFilter"
    class="form-select w-auto"
  >
    <option value="">جميع التصنيفات</option>
    <option value="ثقافة">ثقافة</option>
    <option value="رياضة">رياضة</option>
    <option value="موسيقى">موسيقى</option>
    <option value="عائلي">عائلي</option>
  </select>
  <input
    type="date"
    id="dateFilter"
    class="form-control w-auto"
  />
  <button id="filterBtn" class="btn btn-primary">فلترة</button>
</div>
        <div id="eventsList" class="row row-cols-1 row-cols-md-3 g-4">
        </div>
      </section>
    </main>

    <main-footer></main-footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
      // events data
      const events = [
        {
          id: 1,
          title: "معرض فني",
          date: "2025-09-20",
          location: "معرض الفنون",
          category: "ثقافة",
          description:
            "هذا المعرض يعرض لوحات فنية من فنانين محليين، مع ورش عمل وجولات إرشادية.",
          image: "assets/img/art.jpg",
          related: [5, 3],
        },
        {
          id: 2,
          title: "مباراة كرة قدم",
          date: "2025-09-22",
          location: "الاستاد",
          category: "رياضة",
          description: "مباراة محلية بين فرق شهيرة.",
          image: "assets/img/football.jpeg",
          related: [6],
        },
        {
          id: 3,
          title: "حفل موسيقي",
          date: "2025-09-25",
          location: "القاعة الكبرى",
          category: "موسيقى",
          description: "حفل لفرقة شهيرة.",
          image: "assets/img/music.jpeg",
          related: [1],
        },
        {
          id: 4,
          title: "يوم عائلي",
          date: "2025-09-28",
          location: "الحديقة",
          category: "عائلي",
          description: "أنشطة للعائلات.",
          image: "assets/img/family.jpeg",
          related: [],
        },
        {
          id: 5,
          title: "محاضرة ثقافية",
          date: "2025-10-01",
          location: "الجامعة",
          category: "ثقافة",
          description: "محاضرة عن التاريخ.",
          image: "assets/img/lecture.jpeg",
          related: [1],
        },
        {
          id: 6,
          title: "سباق رياضي",
          date: "2025-10-05",
          location: "الملعب",
          category: "رياضة",
          description: "سباق جري.",
          image: "assets/img/sport.jpeg",
          related: [2],
        },
        {
          id: 7,
          title: "معرض دمشق الدولي",
          date: "2025-08-27 - 2025-09-05",
          location: "مدينة المعارض - Damascus Fairgrounds",
          category: "ثقافة",
          description:
            "أكبر حدث تجاري/ثقافي في المدينة مع أجنحة شركات محلية ودولية، عروض ثقافية ومسرحيات وأكشاك طعام.",
          image: "assets/img/damascus_fair.jpg",
          related: [],
        },
        {
          id: 8,
          title: "مهرجان النادي الصيفي",
          date: "2025-07-15",
          location: "ساحات مفتوحة / نوادي ثقافية بدمشق",
          category: "ثقافة",
          description:
            "عروض رياضية، أنشطة للأطفال، معرض لوحات وعروض موسيقية محلية.",
          image: "assets/img/summer_festival.jpg",
          related: [],
        },
        {
          id: 9,
          title: "ليلة موسيقى تقليدية في الميدان",
          date: "2025-10-10",
          location: "ساحة الميدان أو مسرح صغير",
          category: "موسيقى ",
          description:
            "أمسية موسيقية تقدم مقامات شامية وأمّهات فصحى، مدة ساعتين، الدخول مجاني أو بتذاكر رمزية.",
          image: "assets/img/traditional_music.jpg",
          related: [3],
        },
        {
          id: 10,
          title: "معرض فنون معاصرة",
          date: "2025-11-05 - 2025-11-20",
          location: "قاعة عرض / مركز ثقافي محلي",
          category: "ثقافة",
          description: "معرض لوحات وتصوير فوتوغرافي لفنانين شباب من دمشق.",
          image: "assets/img/contemporary_art.jpg",
          related: [1],
        },
        {
          id: 11,
          title: "ماراثون المدينة",
          date: "2025-9-27",
          location: "كورنيش / شارع رئيسي (10 كم)",
          category: "رياضة",
          description:
            "سباق مفتوح لجميع الأعمار مع فئات للعائلات والمحترفين ونقاط تسجيل.",
          image: "assets/img/marathon.jpg",
          related: [6, 2],
        },
        {
          id: 12,
          title: "مهرجان طعام دمشق",
          date: "2025-12-05",
          location: "موقع مفتوح بدمشق",
          category: "ثقافة",
          description:
            "أكشاك مأكولات شعبية، أطباق شامية، مسابقات طبخ وركن للأطفال.",
          image: "assets/img/food_festival.jpg",
          related: [],
        },
        {
          id: 13,
          title: "عرض مسرحي في دار الأوبرا",
          date: "2025-10-25",
          location: "دار الأوبرا / قاعة محلية",
          category: "موسيقى",
          description: "مسرحية محلية تقليدية أو معاصرة.",
          image: "assets/img/theatre.jpg",
          related: [],
        },
        {
          id: 14,
          title: "سوق الحرف في سوق الحميدية",
          date: "2025-11-15",
          location: "سوق الحميدية، دمشق",
          category: "ثقافة",
          description:
            "سوق للحرفيين يتضمن منتجات تقليدية وحلويات ومشغولات يدوية.",
          image: "assets/img/craft_market.jpg",
          related: [],
        },
        {
          id: 15,
          title: "معرض الزهور بدمشق",
          date: "2025-06-26 - 2025-07-14",
          location: "حديقة تشرين، دمشق",
          category: "عائلي",
          description:
            "معرض نباتات وزهور بمشاركة شركات محلية ودولية مع مسابقات زراعة وعروض للأطفال.",
          image: "assets/img/flower_exhibition.jpg",
          related: [],
        },
      ];

      // دالة عرض الفعاليات
      function displayEvents(filteredEvents) {
        const eventsList = document.getElementById("eventsList");
        eventsList.innerHTML = "";
        filteredEvents.forEach((event) => {
          const col = document.createElement("div");
          col.className = "col event-item";
          col.innerHTML = `
                  <div class="card h-100">
                    <img src="${event.image}" alt="${
            event.title
          }" class="card-img-top">
                    <div class="card-body">
                      <h5 class="card-title">${event.title}</h5>
                      <p class="card-text">تاريخ: ${event.date
                        .split("-")
                        .reverse()
                        .join("-")}، مكان: ${event.location}، تصنيف: ${
            event.category
          }</p>
                      <p class="card-text">${event.description.substring(
                        0,
                        50
                      )}...</p>
                      <a href="event.html?id=${
                        event.id
                      }" class="btn btn-primary">التفاصيل</a>
                    </div>
                  </div>
                `;
          eventsList.appendChild(col);
        });
      }

      document.addEventListener("DOMContentLoaded", function () {
        displayEvents(events);

        // filter
        const filterBtn = document.getElementById("filterBtn");
        if (filterBtn) {
          filterBtn.addEventListener("click", function () {
            const category = document.getElementById("categoryFilter").value;
            const date = document.getElementById("dateFilter").value;
            const filtered = events.filter(
              (e) =>
                (!category || e.category === category) &&
                (!date || e.date === date)
            );
            displayEvents(filtered);
          });
        }

        const urlParams = new URLSearchParams(window.location.search);
        const categoryParam = urlParams.get("category");
        if (categoryParam) {
          document.getElementById("categoryFilter").value = categoryParam;
          const filtered = events.filter((e) => e.category === categoryParam);
          displayEvents(filtered);
        }
      });
    </script>
  </body>
</html>
